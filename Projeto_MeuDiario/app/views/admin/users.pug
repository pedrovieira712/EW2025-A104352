extends ../layout

block content
  .d-flex.justify-content-between.align-items-center.mb-4
    h1 
      i.bi.bi-people.me-2
      | Gestão de Utilizadores
    a.btn.btn-primary(href='/admin') Voltar ao Admin

  if users && users.length > 0
    .table-responsive
      table.table.table-striped
        thead
          tr
            th Nome
            th Username
            th Email
            th Tipo
            th Registado
            th Ações
        tbody
          each userItem in users
            tr
              td= userItem.name
              td= userItem.username
              td= userItem.email
              td
                if userItem.isAdmin
                  span.badge.bg-danger Admin
                else
                  span.badge.bg-primary Utilizador
              td= new Date(userItem.createdAt).toLocaleDateString('pt-PT')
              td
                .btn-group.btn-group-sm
                  a.btn.btn-outline-info(href=`/admin/users/${userItem._id}`) Ver
                  if userItem._id !== user.id
                    form.d-inline(method='POST', action=`/admin/users/${userItem._id}/delete`, onsubmit='return confirm("Tem certeza?")')
                      button.btn.btn-outline-danger(type='submit') Eliminar
  else
    .alert.alert-info Nenhum utilizador encontrado